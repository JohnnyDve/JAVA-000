## 日志分析参数

- -**Xloggc:gc.demo.log**：GC日志文件路径
- -**XX:+PrintGCDetails** ：打印GC日志详情
- -**XX:+PrintGCDateStamps** ：打印GC日志时间戳

## 压力测试工具

SuperBenchmarker

```
// 40个线程 30秒
sb -u http://localhost:8080 -c 40 -N 30
```

## 初始堆大小

不管是串、并、CMS还是G1GC，若是默认不设置堆大小，都会以一个较低的初始值启动，会导致服务启动的初期GC触发的频率过高导致，系统的性能降低。所以我们可以将初始堆大小设置跟最大堆大小一致，来保证系统的性能。

1. 初始堆越大，GC触发的频率越低，系统（业务系统）性能增高，GC处理时间越长
2. 初始堆越小，GC触发的频率越高，系统（业务系统）性能降低，GC开销大

## 不同GC总结

GC|特点|并发|适用场景
--|--|--|--|--
串行|单进程回收 暂停业务|低|单核CPU，低并发
并行|多进程回收 暂停业务 资源利用率优先|高|多核CPU，高并发
CMS|多进程回收 暂停业务时间降低 GC步骤拆分 响应优先|高|多核CPU，高响应
G1|多进程回收 不暂停业务 内存划分 不完全回收 响应保证|高|多核CPU，大内存，要求时间响应


## GC现象总结

1. 堆内存越大，GC触发的频率越低，系统（业务系统）性能增高，GC处理时间越长
2. 堆内存越小，GC触发的频率越高，系统（业务系统）性能降低，GC开销大